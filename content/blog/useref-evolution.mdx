---
title: "useRef in React 19"
date: "2025-01-14"
excerpt: "Learn about the useRef hook and how the new React 19 ref prop behavior simplifies the way we use refs in our components."
readTime: 4
---

The useRef hook is a useful tool in React for accessing DOM elements and storing mutable values. React 19 introduces a simpler way to work with refs in components.

<Callout type="info">
I'm using JavaScript for the examples in this blog post for simplicity and clarity, but I recommend using TypeScript for your projects.
</Callout>

### Basic useRef Usage

Before we check out the new React 19 changes, let's start with a simple example of how we've been using `useRef` up until now:

```javascript
import React, { useRef } from "react";

function TextInput() {
  const inputRef = useRef(null);

  function focusInput() {
    if (inputRef.current) {
      inputRef.current.focus();
    }
  }

  return (
    <div>
      <input ref={inputRef} type="text" placeholder="Try focusing me" />
      <button onClick={focusInput}>Focus Input</button>
    </div>
  );
}
```

In this example, the `useRef` hook creates a reference to the input element. Think of it as a way to "grab onto" a DOM element directly.

When you click the button, `inputRef.current` gives us access to the actual input element, allowing us to call browser APIs like `focus()` on it. The element maintains its state between renders.

This is particularly useful when you need to interact with DOM elements directly, like focusing inputs, playing videos, or measuring element dimensions.

### Using refs with Custom Components

If you try to pass a ref directly to your own component like this:

```javascript
function CustomInput({ placeholder }) {
  return <input placeholder={placeholder} />;
}

function Form() {
  const inputRef = useRef(null);

  // ‚ùå This won't work.
  return <CustomInput ref={inputRef} />;
}
```

You'll get an error in the console:

<Mark color="red">TypeError: Cannot read properties of null</Mark>

The way we would solve this is by using the `forwardRef` API:

```javascript
// CustomInput.js
import React, { forwardRef } from "react";

const CustomInput = forwardRef((props, ref) => (
  <input type="text" ref={ref} {...props} />
));

// Form.js
import React, { useRef } from "react";

function Form() {
  const inputRef = useRef(null);

  function handleFocus() {
    if (inputRef.current) {
      inputRef.current.focus();
    }
  }

  return (
    <form>
      <CustomInput ref={inputRef} placeholder="Enter your name" />
      <button type="button" onClick={handleFocus}>
        Focus Input
      </button>
    </form>
  );
}
```

### The New Way in React 19

React 19 simplifies this by <Mark>making refs work like any other prop</Mark>. You can now directly access `ref` as a prop in your function components without using `forwardRef`:

```javascript
// CustomInput.js
function CustomInput({ ref, ...props }) {
  return <input type="text" ref={ref} {...props} />;
}

// Form.js
function Form() {
  const inputRef = useRef(null);

  function handleFocus() {
    inputRef.current?.focus();
  }

  return (
    <form>
      <CustomInput ref={inputRef} placeholder="Enter your name" />
      <button type="button" onClick={handleFocus}>
        Focus Input
      </button>
    </form>
  );
}
```

#### This new approach:

- Eliminates the need for `forwardRef`
- Makes refs behave like regular props
- Reduces boilerplate code

In future versions, `forwardRef` will be deprecated and eventually removed.

### Resources

- [React 19 Blog Post](https://react.dev/blog)
- [useRef Documentation](https://react.dev/reference/react/useRef)
